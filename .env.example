# Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ═══════════════════════════════════════════════════════════════
# Firebase Configuration
# Get these values from Firebase Console > Project Settings
# ExamPro Project: examshala-ce41d
# ═══════════════════════════════════════════════════════════════

FIREBASE_API_KEY=AIzaSyDeSWog8lCk__K53uuV7SmySB-obQYzB_E
FIREBASE_AUTH_DOMAIN=examshala-ce41d.firebaseapp.com
FIREBASE_DATABASE_URL=https://examshala-ce41d.firebaseio.com
FIREBASE_PROJECT_ID=examshala-ce41d
FIREBASE_STORAGE_BUCKET=examshala-ce41d.firebasestorage.app
FIREBASE_MESSAGING_SENDER_ID=172203928340
FIREBASE_APP_ID=1:172203928340:web:bc06c3becfcc925bd5b001
FIREBASE_MEASUREMENT_ID=G-RQ2SP16JQ5

# Option A: Server-side service account (recommended for production)
# Create a Firebase service account JSON (from Firebase Console -> Project Settings -> Service accounts)
# Copy the JSON, then store it in Netlify as a single secret named FIREBASE_SERVICE_ACCOUNT (JSON string).
# Example (in Netlify environment variable): FIREBASE_SERVICE_ACCOUNT={"type":"service_account",...}

# Option B: Alternative variables (if you prefer to store fields separately)
# FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your_project.iam.gserviceaccount.com
# FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# Optional: Firebase Admin SDK credentials
# Required only if using Cloud Functions
FIREBASE_PRIVATE_KEY=your_private_key_with_escaped_newlines
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your_project.iam.gserviceaccount.com

# ═══════════════════════════════════════════════════════════════
# Google AdSense Configuration
# Get your Publisher ID from AdSense dashboard
# ═══════════════════════════════════════════════════════════════

GOOGLE_ADSENSE_ID=ca-pub-xxxxxxxxxxxxxxxx

# ═══════════════════════════════════════════════════════════════
# Admin Settings
# IMPORTANT: Change these values for production!
# ═══════════════════════════════════════════════════════════════

# Admin panel password (change for security)
ADMIN_PASSWORD=admin123

# Secret key for JWT tokens (use strong random value)
ADMIN_SECRET=change_this_to_a_secure_random_key_in_production

# ═══════════════════════════════════════════════════════════════
# Netlify Configuration
# These are automatically set by Netlify
# ═══════════════════════════════════════════════════════════════

NETLIFY_FUNCTIONS=true
NODE_ENV=production

# ═══════════════════════════════════════════════════════════════
# Optional: Additional Settings
# ═══════════════════════════════════════════════════════════════

# Email for notifications (if implementing email features)
ADMIN_EMAIL=admin@exampro.com

# App settings
APP_NAME=ExamPro
APP_VERSION=1.0.0
APP_ENVIRONMENT=production

# Max file size for imports (in bytes, default: 5MB)
MAX_FILE_SIZE=5242880

# Session timeout (in minutes)
SESSION_TIMEOUT=30

# ═══════════════════════════════════════════════════════════════
# IMPORTANT SECURITY NOTES
# ═══════════════════════════════════════════════════════════════

# 1. NEVER commit your .env file to version control
# 2. Add .env to your .gitignore file
# 3. Use .env.example as a template for other developers
# 4. In Netlify dashboard, set these variables in:
#    Site Settings → Build & Deploy → Environment
# 5. Keep sensitive values secure and rotate regularly
# 6. Use strong, unique values for production passwords

# ═══════════════════════════════════════════════════════════════
# HOW TO USE THIS FILE
# ═══════════════════════════════════════════════════════════════

# Local Development:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your actual values
# 3. Keep .env in .gitignore (never commit)
# 4. Restart your development server to apply changes

# Netlify Deployment:
# 1. Go to: Site Settings → Build & Deploy → Environment
# 2. Add each variable from this file as a secret
# 3. Leave the .env file out of the repository
# 4. Netlify will use the environment variables you set

# GitHub Secrets (if using GitHub Actions):
# 1. Go to: Settings → Secrets and variables → Actions
# 2. Add each variable as a repository secret
# 3. Reference in workflows: ${{ secrets.VARIABLE_NAME }}

# ═══════════════════════════════════════════════════════════════
# NETLIFY ENVIRONMENT SETUP (STEP-BY-STEP)
# ═══════════════════════════════════════════════════════════════
#
# The Netlify Functions (save-results, analytics, export-data)
# require Firebase credentials to persist data.
#
# STEP 1: Generate Firebase Service Account JSON
# ──────────────────────────────────────────────
# 1. Go to Firebase Console: https://console.firebase.google.com
# 2. Select project: examshala-ce41d
# 3. Click ⚙️ Project Settings (top left, near project name)
# 4. Go to SERVICE ACCOUNTS tab
# 5. Select "Node.js" runtime
# 6. Click "Generate New Private Key"
# 7. Save the downloaded JSON file securely
# 8. Copy the entire JSON content (it will look like below)
#
# Example service account structure:
# {
#   "type": "service_account",
#   "project_id": "examshala-ce41d",
#   "private_key_id": "...",
#   "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
#   "client_email": "firebase-adminsdk-xxxxx@examshala-ce41d.iam.gserviceaccount.com",
#   "client_id": "...",
#   "auth_uri": "https://accounts.google.com/o/oauth2/auth",
#   "token_uri": "https://oauth2.googleapis.com/token",
#   ...
# }
#
# STEP 2: Set Netlify Environment Variables
# ─────────────────────────────────────────
# 1. Go to Netlify Dashboard: https://app.netlify.com
# 2. Select your site: examshala
# 3. Go to: Site Settings → Build & Deploy → Environment
# 4. Click "Edit variables" button
# 5. Add the following variables:
#
#    VARIABLE 1 - FIREBASE_DATABASE_URL:
#    Key: FIREBASE_DATABASE_URL
#    Value: https://examshala-ce41d.firebaseio.com
#
#    VARIABLE 2 - FIREBASE_SERVICE_ACCOUNT:
#    Key: FIREBASE_SERVICE_ACCOUNT
#    Value: {paste entire JSON from service account file as single-line string}
#    (Remove all line breaks and newlines from the JSON)
#
# 6. Click "Save" button
# 7. Netlify will automatically trigger a redeploy
#
# STEP 3: Verify Firebase Persistence (After Redeploy)
# ──────────────────────────────────────────────────
# 1. Run local test script: npm test  (or node test_firebase_save.js)
# 2. OR use curl to POST sample data:
#    curl -X POST https://examshala.netlify.app/.netlify/functions/save-results \
#      -H "Content-Type: application/json" \
#      -d '{"userId":"test","exam":"Math","score":95,"total":100}'
# 3. Check Firebase Console > Realtime Database
# 4. Look for new entry under: /results/{resultId}
# 5. If data appears, Firebase persistence is working! ✅
#
# FALLBACK BEHAVIOR (If Firebase Not Configured):
# ────────────────────────────────────────────────
# If FIREBASE_SERVICE_ACCOUNT is not set, the function will automatically:
# 1. Try Firebase REST API (FIREBASE_DATABASE_URL)
# 2. If that fails, log data locally
# 3. Still return success to frontend (no data loss)
#
# Response format: { "success": true, "resultId": "xxx", "stored": "firebase-admin|firebase-rest|log-only" }

